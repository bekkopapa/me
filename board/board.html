<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>진화하는 AI</title>
  <style>
    body {
      background-color: #11191f;
      color: azure;
      margin-left: 15%;
      margin-right: 15%;
      font-family: 'Courier New', Courier, monospace;
    }

    .post-timestamp {
      font-size: 14px;
      color: #888;
      margin-bottom: 5px;
    }

    h1 {
      text-align: center;
    }
    
    .post {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    margin-bottom: 20px;
    padding: 10px;
    border-radius: 4px;
    max-width: 100%;
    box-shadow: 1px 1px 1.5px rgb(143, 143, 143);
  }


    .post-content {
      align-items: center;
      font-size: 15px;
      margin-top: 10px;
    }

    .image-container {
      justify-self: center;
      width: 600px;
      max-width: 100%;
      padding: 5px;
      border: 1px solid yellow;
      border-radius: 3px;
    }

    .post-image {
      max-width: 100%;
      margin-right: 20px;
      margin-top: 10px;
    }

    .common-image {
      width: 20%;
      height: 20%;
      border-radius: 3px;
      margin-right: 10px;
      margin-bottom: 1.6em;
    }

    @media (max-width: 768px) {
    body {
    font-size: 20px;
    margin: 3%;
    padding: 0;
    }
    h1 {
      font-size: 30px;
      text-align: center;
    }
    .post {
      font-size: 15px;
    }
    .common-image {
      display: none;
    }
  }
  </style>
</head>
<body>
  <body>
    <h1>AI answerCollection</h1>
    <hr>
    <!-- 게시물 목록 표시 -->
    <div id="post-list">
    </div>
  
    <script>
      // 게시물 목록을 가져와서 표시하는 함수
      async function fetchPosts() {
        const response = await fetch('/api/posts');
        const data = await response.json();
  
        const postList = document.getElementById('post-list');
  
        // 기존 게시물 삭제
        postList.innerHTML = '';
  
        // 게시물 목록 동적 생성
        data.posts.forEach(post => {
          const postElement = document.createElement('div');
          postElement.classList.add('post');
  
          const timeElement = document.createElement('p');
          const timestamp = new Date(parseInt(post.id)); // 타임스탬프를 Date 객체로 변환
          timeElement.textContent = timestamp.toLocaleString(); // Date 객체를 로케일 문자열로 변환
          timeElement.classList.add('post-timestamp'); // CSS 클래스 추가
  
          const imageElement = document.createElement('img');
          imageElement.src = `../${post.image}`;
          imageElement.alt = '게시물 이미지';
          imageElement.classList.add('post-image'); // CSS 클래스 추가
  
          const contentElement = document.createElement('p');
          contentElement.textContent = "comment : " + post.comments;
          contentElement.classList.add('post-content'); // CSS 클래스 추가

          const commonImageElement = document.createElement('img');
          commonImageElement.src = '../GPTweb/imgs/gpt.png';
          commonImageElement.alt = '공통 이미지';
          commonImageElement.classList.add('common-image'); // CSS 클래스 추가

          const imageContainer = document.createElement('div'); // 이미지를 담을 새로운 div 생성
          imageContainer.appendChild(commonImageElement); // 공통 이미지 추가
          imageContainer.appendChild(imageElement); // 게시물 이미지 추가
          imageContainer.classList.add('image-container'); // CSS 클래스 추가

          
          postElement.appendChild(timeElement);
          postElement.appendChild(imageContainer); // 게시물 요소에 추가
          postElement.appendChild(contentElement);
  
          postList.prepend(postElement);
        });
      }
  
      // 페이지 로드 시 게시물 목록 가져오기
      fetchPosts();
    </script>
  </body>
  </html>